{% extends "cms/german_with_videos/base.html" %}

{% block content %}
<div class="container">
    <h1 class="title is-1 mb-6">Bulk Actions</h1>
    
    <div class="columns is-multiline">
        <!-- Check Subtitles -->
        <div class="column is-one-third">
            <div class="card">
                <div class="card-content">
                    <h2 class="title is-4 mb-4">Check Subtitles</h2>
                    <p class="content mb-4">
                        Videos imported from channels are not automatically checked for available subtitles. 
                        This action will check all videos that haven't been checked yet.
                        {% if unchecked_count > 0 %}
                        <span class="has-text-primary has-text-weight-semibold">{{ unchecked_count }} videos</span> need to be checked.
                        {% else %}
                        All videos have been checked for subtitles.
                        {% endif %}
                    </p>
                    <form method="post" action="{% url 'cms:german_with_videos:bulk_check_subtitles' %}">
                        {% csrf_token %}
                        <button type="submit" class="button is-primary is-fullwidth">
                            Check Subtitles for Unchecked Videos
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Mark Videos Without Arabic -->
        <div class="column is-one-third">
            <div class="card">
                <div class="card-content">
                    <h2 class="title is-4 mb-4">Mark Videos Without Target Language Subtitles</h2>
                    <p class="content mb-4">Mark all videos that don't have German subtitles as not relevant.</p>
                    <form method="post" action="{% url 'cms:german_with_videos:mark_videos_without_german_subtitles' %}">
                        {% csrf_token %}
                        <button type="submit" class="button is-danger is-fullwidth">
                            Mark Videos Without Subtitles
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Generate Snippets -->
        <div class="column is-one-third">
            <div class="card">
                <div class="card-content">
                    <h2 class="title is-4 mb-4">Generate Snippets</h2>
                    <p class="content mb-4">Generate snippets for all shortlisted videos with Arabic subtitles.</p>
                    <form method="post" action="{% url 'cms:german_with_videos:generate_snippets_all' %}">
                        {% csrf_token %}
                        <button type="submit" class="button is-info is-fullwidth">
                            Generate Snippets for All Shortlisted Videos
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Generate Translations -->
        <div class="column is-one-third">
            <div class="card">
                <div class="card-content">
                    <h2 class="title is-4 mb-4">Generate Translations</h2>
                    <p class="content mb-4">Generate translations for all videos that have snippets.</p>
                    <form method="post" action="{% url 'cms:german_with_videos:generate_translations_all' %}">
                        {% csrf_token %}
                        <button type="submit" class="button is-success is-fullwidth">
                            Generate Translations for All Videos with Snippets
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Enrich Metadata -->
        <div class="column is-one-third">
            <div class="card">
                <div class="card-content">
                    <h2 class="title is-4 mb-4">Enrich Video Metadata</h2>
                    <p class="content mb-4">
                        Fetch and update metadata for all live videos and videos with snippets and translations.
                        This will add YouTube tags, topics, and update titles.
                    </p>
                    <form method="post" action="{% url 'cms:german_with_videos:enrich_video_metadata' %}">
                        {% csrf_token %}
                        <button type="submit" class="button is-link is-fullwidth">
                            Enrich Video Metadata
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Publish Videos with Many Snippets -->
        <div class="column is-one-third">
            <div class="card">
                <div class="card-content">
                    <h2 class="title is-4 mb-4">Publish Videos with Many Snippets</h2>
                    <p class="content mb-4">
                        Automatically publish all videos that have more than 5 snippets and are ready for publishing.
                        This will set their status to LIVE.
                    </p>
                    <form method="post" action="{% url 'cms:german_with_videos:publish_videos_with_many_snippets' %}">
                        {% csrf_token %}
                        <button type="submit" class="button is-primary is-fullwidth">
                            Publish Videos with Many Snippets
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 